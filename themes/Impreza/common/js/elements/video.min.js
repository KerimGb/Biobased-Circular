(function($,_undefined){"use strict";window.$us.YTPlayers=window.$us.YTPlayers||{};$us.wVideo=function(container){const self=this;self.$container=$(container);self.$videoH=$('.w-video-h',self.$container);self.cookieName=self.$container.data('cookie-name');self.isWithOverlay=self.$container.hasClass('with_overlay');if($ush.isSafari){(self.getVideoElement()||{load:$.noop}).load()}
if(!self.cookieName&&!self.isWithOverlay){return}
self.data={};if(self.$container.is('[onclick]')){self.data=self.$container[0].onclick()||{};if(!$us.usbPreview())self.$container.removeAttr('onclick')}
self._events={hideOverlay:self._hideOverlay.bind(self),confirm:self._confirm.bind(self)};if(self.cookieName){self.$container.on('click','.action_confirm_load',self._events.confirm)}
self.$container.one('click','> *',self._events.hideOverlay)};$.extend($us.wVideo.prototype,{getVideoElement:function(){return $('video',this.$videoH)[0]||null},_confirm:function(){const self=this;if($('input[name^='+self.cookieName+']:checked',self.$container).length){$ush.setCookie(self.cookieName,1,365)}
if(self.isWithOverlay){self.insertPlayer()}else{self.$videoH.html($ush.base64Decode(''+$('script[type="text/template"]',self.$container).text())).removeAttr('data-cookie-name')}},_hideOverlay:function(e){const self=this;e.preventDefault();if(self.$container.is('.with_overlay')){self.$container.removeAttr('style').removeClass('with_overlay')}
if(!self.cookieName){self.insertPlayer()}},insertPlayer:function(){const self=this;var data=$.extend({player_id:'',player_api:'',player_html:''},self.data||{});if(data.player_api&&!$('script[src="'+data.player_api+'"]',document.head).length){$('head').append('<script src="'+data.player_api+'"></script>')}
self.$videoH.html(data.player_html);const videoElement=self.getVideoElement();if(!data.player_api&&$ush.isNode(videoElement)){if(self.isWithOverlay&&$ush.isSafari){videoElement.setAttribute('preload','metadata')}
videoElement.play()}}});$.fn.wVideo=function(){return this.each(function(){$(this).data('wVideo',new $us.wVideo(this))})};$(()=>$('.w-video').wVideo());$us.$document.on('usPostList.itemsLoaded usGrid.itemsLoaded',(_,$items)=>{$('.w-video',$items).wVideo()})})(jQuery)